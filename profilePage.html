<!DOCTYPE html>

<html>

<head>
	<title>vChat - Portal</title>
	<meta name="description" content="SAT Project">
	<meta property="og:title" content="vChat - Official Website">
	<meta property="og:site_name" content="vChat">
	<meta property="og:description" content="SAT Project">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<link rel="stylesheet" href="./stylesheet.css">
	<link rel="icon" type="image/png" href="./assets/images/favicon.jpg">

	<script src="https://unpkg.com/localbase/dist/localbase.dev.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.js"
		integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous">
		</script>
</head>

<body>

	<script>
		let pageCookie = Cookies.get('cookieUsername');
		console.log(pageCookie + " cookie fetched");
	</script>


	<div class="logo2">
		<a href="./index.html">
			<img src="./assets/images/vchatLogo.png" style="position:absolute; top: 5%; left: 3%;" width="10.3%"
				alt="vChatLogo">
		</a>
	</div>


	<div class="container">

		<div class="header" style="font-size: 80px;">
			<b>LET'S GET STARTED!</b>
		</div>


		<div class="profileContainer">

			<button class="profileItem" id="rooms">
				<img src="assets/images/joinIcon.png" width="150" height="150" alt="plugIcon">
				<p class="profileHeading" style="font-size: 35px;"><b>rooms</b></p>
				<p class="profileSubtitle" style="font-size: 20px;"><b>hub</b></p>
			</button>

			<button class="profileItem">
				<img class="userIcon" id="userIcon"
					src="https://cdn.discordapp.com/attachments/846374789156831272/865178398045110272/defaultCharacter.png"
					width="150" height="150" alt="plugIcon">
				<p class="profileHeading" style="font-size: 35px;"><b>account</b></p>
				<p class="profileSubtitle" style="font-size: 20px;"><b>information</b></p>
			</button>

			<script>


				const db = new Localbase("vChatDataBase");
				const icon = document.getElementById("userIcon")

				db.collection('users').doc({ username: pageCookie }).get().then(doc => {
					icon.src = doc[`icon`];
					Cookies.set("cookieIcon", doc['icon'])
				})

				icon.addEventListener("error", () => {
					alert(`X_X\nunable to load your profile picture, this is because of a bad link you provided. makes sure the link is valid and it ends in\n1. png\n2. jpg\n3. jpeg\n4. gif`)
					return window.location.href = './accountProfile.html'
				})

				const profileButton = document.getElementById("userIcon")
				profileButton.addEventListener("click", function (e) {
					return window.location.href = './accountProfile.html'
				})

				const rooomsButton = document.getElementById("rooms")
				rooomsButton.addEventListener("click", function (e) {
					
					return window.location.href = './rooms.html'
				})
			</script>


		</div>
	</div>
</body>

</html>